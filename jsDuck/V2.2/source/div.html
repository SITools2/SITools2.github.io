<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">ï»¿(function(){function p(a,k,o){if(!k.is||!k.getCustomData(&quot;block_processed&quot;))k.is&amp;&amp;CKEDITOR.dom.element.setMarker(o,k,&quot;block_processed&quot;,!0),a.push(k)}function n(a,k){function o(){this.foreach(function(d){if(/^(?!vbox|hbox)/.test(d.type)&amp;&amp;(d.setup||(d.setup=function(c){d.setValue(c.getAttribute(d.id)||&quot;&quot;,1)}),!d.commit))d.commit=function(c){var a=this.getValue();&quot;dir&quot;==d.id&amp;&amp;c.getComputedStyle(&quot;direction&quot;)==a||(a?c.setAttribute(d.id,a):c.removeAttribute(d.id))}})}var n=function(){var d=CKEDITOR.tools.extend({},
CKEDITOR.dtd.$blockLimit);a.config.div_wrapTable&amp;&amp;(delete d.td,delete d.th);return d}(),q=CKEDITOR.dtd.div,l={},m=[];return{title:a.lang.div.title,minWidth:400,minHeight:165,contents:[{id:&quot;info&quot;,label:a.lang.common.generalTab,title:a.lang.common.generalTab,elements:[{type:&quot;hbox&quot;,widths:[&quot;50%&quot;,&quot;50%&quot;],children:[{id:&quot;elementStyle&quot;,type:&quot;select&quot;,style:&quot;width: 100%;&quot;,label:a.lang.div.styleSelectLabel,&quot;default&quot;:&quot;&quot;,items:[[a.lang.common.notSet,&quot;&quot;]],onChange:function(){var d=[&quot;info:elementStyle&quot;,&quot;info:class&quot;,
&quot;advanced:dir&quot;,&quot;advanced:style&quot;],c=this.getDialog(),h=c._element&amp;&amp;c._element.clone()||new CKEDITOR.dom.element(&quot;div&quot;,a.document);this.commit(h,!0);for(var d=[].concat(d),b=d.length,i,e=0;e&lt;b;e++)(i=c.getContentElement.apply(c,d[e].split(&quot;:&quot;)))&amp;&amp;i.setup&amp;&amp;i.setup(h,!0)},setup:function(a){for(var c in l)l[c].checkElementRemovable(a,!0)&amp;&amp;this.setValue(c,1)},commit:function(a){var c;(c=this.getValue())?l[c].applyToObject(a):a.removeAttribute(&quot;style&quot;)}},{id:&quot;class&quot;,type:&quot;text&quot;,requiredContent:&quot;div(cke-xyz)&quot;,
label:a.lang.common.cssClass,&quot;default&quot;:&quot;&quot;}]}]},{id:&quot;advanced&quot;,label:a.lang.common.advancedTab,title:a.lang.common.advancedTab,elements:[{type:&quot;vbox&quot;,padding:1,children:[{type:&quot;hbox&quot;,widths:[&quot;50%&quot;,&quot;50%&quot;],children:[{type:&quot;text&quot;,id:&quot;id&quot;,requiredContent:&quot;div[id]&quot;,label:a.lang.common.id,&quot;default&quot;:&quot;&quot;},{type:&quot;text&quot;,id:&quot;lang&quot;,requiredContent:&quot;div[lang]&quot;,label:a.lang.common.langCode,&quot;default&quot;:&quot;&quot;}]},{type:&quot;hbox&quot;,children:[{type:&quot;text&quot;,id:&quot;style&quot;,requiredContent:&quot;div{cke-xyz}&quot;,style:&quot;width: 100%;&quot;,label:a.lang.common.cssStyle,
&quot;default&quot;:&quot;&quot;,commit:function(a){a.setAttribute(&quot;style&quot;,this.getValue())}}]},{type:&quot;hbox&quot;,children:[{type:&quot;text&quot;,id:&quot;title&quot;,requiredContent:&quot;div[title]&quot;,style:&quot;width: 100%;&quot;,label:a.lang.common.advisoryTitle,&quot;default&quot;:&quot;&quot;}]},{type:&quot;select&quot;,id:&quot;dir&quot;,requiredContent:&quot;div[dir]&quot;,style:&quot;width: 100%;&quot;,label:a.lang.common.langDir,&quot;default&quot;:&quot;&quot;,items:[[a.lang.common.notSet,&quot;&quot;],[a.lang.common.langDirLtr,&quot;ltr&quot;],[a.lang.common.langDirRtl,&quot;rtl&quot;]]}]}]}],onLoad:function(){o.call(this);var d=this,c=this.getContentElement(&quot;info&quot;,
&quot;elementStyle&quot;);a.getStylesSet(function(h){var b,i;if(h)for(var e=0;e&lt;h.length;e++)i=h[e],i.element&amp;&amp;&quot;div&quot;==i.element&amp;&amp;(b=i.name,l[b]=i=new CKEDITOR.style(i),a.filter.check(i)&amp;&amp;(c.items.push([b,b]),c.add(b,b)));c[1&lt;c.items.length?&quot;enable&quot;:&quot;disable&quot;]();setTimeout(function(){d._element&amp;&amp;c.setup(d._element)},0)})},onShow:function(){&quot;editdiv&quot;==k&amp;&amp;this.setupContent(this._element=CKEDITOR.plugins.div.getSurroundDiv(a))},onOk:function(){if(&quot;editdiv&quot;==k)m=[this._element];else{var d=[],c={},h=[],b,i=a.getSelection(),
e=i.getRanges(),l=i.createBookmarks(),g,j;for(g=0;g&lt;e.length;g++)for(j=e[g].createIterator();b=j.getNextParagraph();)if(b.getName()in n){var f=b.getChildren();for(b=0;b&lt;f.count();b++)p(h,f.getItem(b),c)}else{for(;!q[b.getName()]&amp;&amp;!b.equals(e[g].root);)b=b.getParent();p(h,b,c)}CKEDITOR.dom.element.clearAllMarkers(c);e=[];g=null;for(j=0;j&lt;h.length;j++)b=h[j],f=a.elementPath(b).blockLimit,a.config.div_wrapTable&amp;&amp;f.is([&quot;td&quot;,&quot;th&quot;])&amp;&amp;(f=a.elementPath(f.getParent()).blockLimit),f.equals(g)||(g=f,e.push([])),
e[e.length-1].push(b);for(g=0;g&lt;e.length;g++){f=e[g][0];h=f.getParent();for(b=1;b&lt;e[g].length;b++)h=h.getCommonAncestor(e[g][b]);j=new CKEDITOR.dom.element(&quot;div&quot;,a.document);for(b=0;b&lt;e[g].length;b++){for(f=e[g][b];!f.getParent().equals(h);)f=f.getParent();e[g][b]=f}for(b=0;b&lt;e[g].length;b++)if(f=e[g][b],!f.getCustomData||!f.getCustomData(&quot;block_processed&quot;))f.is&amp;&amp;CKEDITOR.dom.element.setMarker(c,f,&quot;block_processed&quot;,!0),b||j.insertBefore(f),j.append(f);CKEDITOR.dom.element.clearAllMarkers(c);d.push(j)}i.selectBookmarks(l);
m=d}d=m.length;for(c=0;c&lt;d;c++)this.commitContent(m[c]),!m[c].getAttribute(&quot;style&quot;)&amp;&amp;m[c].removeAttribute(&quot;style&quot;);this.hide()},onHide:function(){&quot;editdiv&quot;==k&amp;&amp;this._element.removeCustomData(&quot;elementStyle&quot;);delete this._element}}}CKEDITOR.dialog.add(&quot;creatediv&quot;,function(a){return n(a,&quot;creatediv&quot;)});CKEDITOR.dialog.add(&quot;editdiv&quot;,function(a){return n(a,&quot;editdiv&quot;)})})();</pre>
</body>
</html>
